# PyHP

PyHP is an (incomplete!) implementation of the PHP language using the
[RPython](http://pypy.org) technology.

PyHP stands for Python + PHP, as RRpython is a subset of the Python language.

Highly unstable and work in progress.

[HippyVM](https://github.com/hippyvm/hippyvm) is too built on top of RPython,
and is a complete, working implementation.

## Project structure

- `main.py` - main entry point
- `sourceparcer.py` - parses a given PHP file using the `grammar.txt` definition,
and produces an AST tree consisting of `operations.py` nodes
- `bytecode.py` - turns the AST tree produced by `sourceparcer.py` into bytecode
by calling `compile()` on the tree
- `interpreter.py` - takes the bytecode generated by `bytecode.py` and executes it
- `grammar.txt` - EBNF PHP grammar used by `sourceparcer.py`
- `operations.py` - AST tree nodes

## Building

Starting the VM

    vagrant up

Building the interpreter

    cd /var/www/pyhp
    rpython -Ojit targetpyhp.py

Running the interpreter

    ./targetpyhp-c example.php

Run tests

    PYTHONPATH=$PYTHONPATH:/home/vagrant/pypy-src/ py.test tests

## Attributions and inspirations

[JavaScript on top of RPython](https://bitbucket.org/pypy/lang-js/src/de89ec32a7dc?at=default)

[Example interpreter](https://bitbucket.org/pypy/example-interpreter/src/a00d0f9c36f1?at=default)

[Pascal on top of RPython](https://github.com/WarPie/Pascal)

[HippyVM - php on top of RPython](https://github.com/hippyvm/hippyvm)
